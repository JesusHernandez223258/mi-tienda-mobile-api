<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Panel de Pruebas API Admin</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div class="container">
    <h1>Panel de Pruebas API Admin</h1>

    <!-- SECCIÓN DE LOGIN -->
    <div id="login-section">
      <fieldset>
        <legend>1. Autenticación</legend>
        <form id="login-form">
          <label for="email">Email:</label>
          <input type="email" id="email" list="test-users" placeholder="Selecciona o escribe un email" required>
          <datalist id="test-users"></datalist>

          <label for="password">Contraseña:</label>
          <input type="password" id="password" required>

          <button type="submit">Login</button>
        </form>
      </fieldset>
    </div>

    <!-- PANEL DE ADMINISTRADOR (oculto por defecto) -->
    <div id="admin-panel" class="hidden">
      <div id="user-info"></div>
      <button id="logout-btn">Cerrar Sesión</button>
      <hr>

      <!-- SECCIÓN DE REGISTRO DE USUARIOS -->
      <fieldset>
        <legend>2. Gestión de Usuarios</legend>
        <div class="endpoint-test">
          <h4>Registrar Nuevo Usuario (POST /api/v1/auth/register)</h4>
          <p class="note">Nota: Solo un administrador puede realizar esta acción.</p>
          <form id="register-form">
            <input type="email" name="email" placeholder="Email del nuevo usuario" required>
            <input type="password" name="password" placeholder="Contraseña del nuevo usuario" required>
            <label for="role-select">Rol del usuario:</label>
            <select name="role" id="role-select" aria-label="Rol del usuario">
              <option value="cliente" selected>Rol: Cliente</option>
              <option value="admin">Rol: Administrador</option>
            </select>
            <button type="submit">Registrar Usuario</button>
          </form>
        </div>
      </fieldset>

      <!-- GESTIÓN DE PRODUCTOS -->
      <fieldset>
        <legend>3. Gestión de Productos</legend>

        <!-- Listar Productos -->
        <div class="endpoint-test">
          <h4>Listar Productos (GET /api/v1/productos)</h4>
          <form id="list-products-form">
            <label for="page">Página:</label>
            <input type="number" id="page" value="1" min="1">
            <label for="limit">Límite:</label>
            <input type="number" id="limit" value="5" min="1">
            <button type="submit">Obtener Productos</button>
          </form>
        </div>

        <!-- Crear Producto -->
        <div class="endpoint-test">
          <h4>Crear Producto (POST /api/v1/productos)</h4>
          <form id="create-product-form" enctype="multipart/form-data">
            <input type="text" name="nombre" placeholder="Nombre del producto" required>
            <input type="text" name="descripcion" placeholder="Descripción" required>
            <input type="number" name="precio" placeholder="Precio" step="0.01" required>
            <input type="number" name="stock" placeholder="Stock" required>
            <label for="create-imagen">Imagen:</label>
            <input type="file" id="create-imagen" name="imagen" accept="image/*" title="Seleccionar imagen del producto">
            <button type="submit">Crear Producto</button>
          </form>
        </div>

        <!-- Gestionar un Producto Específico -->
        <div class="endpoint-test">
          <h4>Gestionar Producto por ID (GET, PUT, DELETE)</h4>
          <input type="text" id="product-id" placeholder="Introduce el ID del producto aquí">
          <button id="get-product-btn">Obtener</button>
          <button id="delete-product-btn">Eliminar</button>

          <form id="update-product-form" enctype="multipart/form-data">
            <h4>Datos para Actualizar (PUT)</h4>
            <input type="text" id="update-nombre" name="nombre" placeholder="Nuevo nombre">
            <input type="text" id="update-descripcion" name="descripcion" placeholder="Nueva descripción">
            <input type="number" id="update-precio" name="precio" placeholder="Nuevo precio" step="0.01">
            <input type="number" id="update-stock" name="stock" placeholder="Nuevo stock">
            <!-- CAMBIO: Campo para actualizar la imagen -->
            <label for="update-imagen">Nueva Imagen (opcional):</label>
            <input type="file" id="update-imagen" name="imagen" accept="image/*">
            <button type="submit">Actualizar Producto</button>
          </form>
        </div>
      </fieldset>
    </div>

    <!-- ÁREA DE RESULTADOS -->
    <fieldset>
      <legend>Resultados de la API</legend>
      <pre id="api-result">Aquí se mostrarán las respuestas de la API...</pre>
    </fieldset>

  </div>
  <script src="script.js"></script>
</body>

</html>